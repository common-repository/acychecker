"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var JoomlaMenuService = /*#__PURE__*/function () {
  function JoomlaMenuService() {
    _classCallCheck(this, JoomlaMenuService);
  }

  _createClass(JoomlaMenuService, null, [{
    key: "setWidthJoomlaContent",
    value: function setWidthJoomlaContent() {
      var leftMenu = document.querySelector('#acyc__joomla__left-menu');
      if (!leftMenu) return;
      var menuWidth = leftMenu.offsetWidth;

      if (window.offsetWidth < 640) {
        menuWidth = 0;
        leftMenu.style.display = 'none';
      } else {
        leftMenu.style.display = 'block';
      }

      var contentElem = document.querySelector('#acyc_content');
      contentElem.style.width = 'calc(100% - ' + menuWidth + 'px)';
      contentElem.style.marginLeft = menuWidth + 'px';
      document.querySelector('#system-message-container').style.marginLeft = menuWidth + 15 + 'px';
    }
  }, {
    key: "setJoomlaLeftMenu",
    value: function setJoomlaLeftMenu() {
      var leftMenu = document.querySelector('#acyc__joomla__left-menu');
      var buttonToggleLeftMenu = document.querySelector('#acyc__joomla__left-menu--toggle');
      var textLeftMenu = document.querySelectorAll('#acyc__joomla__left-menu a span');
      var iTagforCollapse = document.querySelector('#acyc__joomla__left-menu--toggle i');
      document.querySelector('.btn-subhead').style.display = 'none';

      if (buttonToggleLeftMenu.style.display !== 'none') {
        if (leftMenu.classList.contains('collapsed')) {
          textLeftMenu.forEach(function (elem) {
            elem.style.display = 'none';
          });
          leftMenu.style.width = '55px';
          iTagforCollapse.classList.remove('acycicon-keyboard_arrow_left');
          iTagforCollapse.classList.add('acycicon-keyboard_arrow_right');
        } else {
          textLeftMenu.forEach(function (elem) {
            elem.style.display = 'inline';
          });
          leftMenu.style.width = '260px';
          iTagforCollapse.classList.remove('acycicon-keyboard_arrow_right');
          iTagforCollapse.classList.add('acycicon-keyboard_arrow_left');
        }

        JoomlaMenuService.setWidthJoomlaContent();
        buttonToggleLeftMenu.removeEventListener('click', function () {});
        buttonToggleLeftMenu.addEventListener('click', function () {
          if (leftMenu.classList.contains('collapsed')) {
            leftMenu.classList.remove('collapsed');
            textLeftMenu.forEach(function (elem) {
              elem.style.display = 'inline';
            });
            leftMenu.style.width = '260px';
            iTagforCollapse.classList.remove('acycicon-keyboard_arrow_right');
            iTagforCollapse.classList.add('acycicon-keyboard_arrow_left');
            CookieService.setCookie('menuJoomlaAcyc', '', 365);
          } else {
            leftMenu.classList.add('collapsed');
            textLeftMenu.forEach(function (elem) {
              elem.style.display = 'none';
            });
            leftMenu.style.width = '55px';
            iTagforCollapse.classList.remove('acycicon-keyboard_arrow_left');
            iTagforCollapse.classList.add('acycicon-keyboard_arrow_right');
            CookieService.setCookie('menuJoomlaAcyc', 'collapsed', 365);
          }

          JoomlaMenuService.setWidthJoomlaContent();
        });
      }

      window.addEventListener('resize', function () {
        if (window.innerWidth < 950 && !leftMenu.classList.contains('collapsed')) buttonToggleLeftMenu.click();
        JoomlaMenuService.setWidthJoomlaContent();
      });
    }
  }]);

  return JoomlaMenuService;
}();